<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grade 12 Physical Science Portal</title>

<style>
body {
  font-family: Arial;
  background:#f4f6f9;
  text-align:center;
}

input, button {
  padding:10px;
  margin:5px;
  width:250px;
}

button {
  background:#06b6d4;
  border:none;
  color:white;
  cursor:pointer;
}

#signupBox, #loginBox, #verifyBox, #portal {
  display:none;
}

/* Subject Tabs */
.tabs {
  display:flex;
  justify-content:center;
  margin-top:20px;
}

.tab-btn {
  padding:12px 25px;
  margin:5px;
  background:#0f172a;
  color:white;
  cursor:pointer;
}

.viewer {
  width:90%;
  height:600px;
  margin:20px auto;
  overflow:hidden;
  position:relative;
}

.slide {
  display:none;
}

.slide.active {
  display:block;
}

iframe {
  width:100%;
  height:600px;
  border:none;
}
</style>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
emailjs.init("_6kozn-J9-QGCchMe");
</script>

</head>
<body>

<h1>Physical Science Portal</h1>

<!-- HOME OPTIONS -->
<div id="home">
  <button onclick="showSignup()">Sign Up</button>
  <button onclick="showLogin()">Log In</button>
</div>

<!-- SIGNUP -->
<div id="signupBox">
<h2>Sign Up</h2>
<input type="email" id="suEmail" placeholder="Email"><br>
<input type="password" id="suPass" placeholder="Password"><br>
<button onclick="signUp()">Continue</button>
</div>

<!-- LOGIN -->
<div id="loginBox">
<h2>Log In</h2>
<input type="email" id="liEmail" placeholder="Email"><br>
<input type="password" id="liPass" placeholder="Password"><br>
<button onclick="logIn()">Login</button>
<p id="loginError"></p>
</div>

<!-- VERIFY -->
<div id="verifyBox">
<h2>Enter Code</h2>
<input type="text" id="code"><br>
<button onclick="sendCode()">Send Code</button>
<button onclick="verifyCode()">Verify</button>
<p id="timer"></p>
<p id="codeError"></p>
</div>

<!-- PORTAL -->
<div id="portal">

<div class="tabs">
  <div class="tab-btn" onclick="showSlide('physics')">Physics</div>
  <div class="tab-btn" onclick="showSlide('chemistry')">Chemistry</div>
</div>

<div class="viewer">
  <div id="physics" class="slide active">
    <iframe src="physics-paper1.pdf"></iframe>
  </div>

  <div id="chemistry" class="slide">
    <iframe src="chemistry-paper2.pdf"></iframe>
  </div>
</div>

</div>

<script>

let users = JSON.parse(localStorage.getItem("users") || "[]");
let currentCode="";
let cooldown=false;

function showSignup(){
document.getElementById("home").style.display="none";
document.getElementById("signupBox").style.display="block";
}

function showLogin(){
document.getElementById("home").style.display="none";
document.getElementById("loginBox").style.display="block";
}

// SIGNUP
function signUp(){
let email=document.getElementById("suEmail").value;
let pass=document.getElementById("suPass").value;

localStorage.setItem("tempUser", JSON.stringify({email,pass}));

document.getElementById("signupBox").style.display="none";
document.getElementById("verifyBox").style.display="block";
}

// LOGIN
function logIn(){
let email=document.getElementById("liEmail").value;
let pass=document.getElementById("liPass").value;

let user=users.find(u=>u.email===email && u.pass===pass);

if(user){
document.getElementById("loginBox").style.display="none";
document.getElementById("portal").style.display="block";
}else{
document.getElementById("loginError").innerText="Incorrect login";
}
}

// CODE
function generateCode(){
let chars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%";
let code="";
for(let i=0;i<8;i++){
code+=chars[Math.floor(Math.random()*chars.length)];
}
return code;
}

function sendCode(){
if(cooldown) return;

let tempUser=JSON.parse(localStorage.getItem("tempUser"));

currentCode=generateCode();
localStorage.setItem("tempCode",currentCode);

emailjs.send("service_ah9oypr","template_0qg4mop",{
to_email: tempUser.email,
code: currentCode
});

alert("Code: "+currentCode);
startTimer();
}

function startTimer(){
cooldown=true;
let t=180;
let timer=document.getElementById("timer");

let i=setInterval(()=>{
timer.innerText="Resend in "+t+"s";
t--;
if(t<0){
clearInterval(i);
cooldown=false;
timer.innerText="";
}
},1000);
}

function verifyCode(){
let input=document.getElementById("code").value;
let saved=localStorage.getItem("tempCode");
let tempUser=JSON.parse(localStorage.getItem("tempUser"));

if(input===saved){
users.push(tempUser);
localStorage.setItem("users",JSON.stringify(users));

document.getElementById("verifyBox").style.display="none";
document.getElementById("portal").style.display="block";
}else{
document.getElementById("codeError").innerText="Wrong code";
}
}

// SLIDER
function showSlide(subject){
document.querySelectorAll(".slide").forEach(s=>s.classList.remove("active"));
document.getElementById(subject).classList.add("active");
}

</script>

</body>
</html>









